<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sign Up - Horizon Key</title>

  <!-- Your existing CSS links -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
  <link href="assets/css/main.css" rel="stylesheet" />

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #141414;
      color: #ffffff;
      margin: 0;
      padding: 0;
    }

    .form-wrapper {
      max-width: 480px;
      margin: 100px auto;
      padding: 40px;
      background-color: #1d1d1d;
      border: 1px solid #2d2d2d;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    .form-wrapper h2 {
      text-align: center;
      color: #ffcc33;
      margin-bottom: 30px;
      font-weight: 600;
    }

    .form-label {
      color: #e0e0e0;
    }

    .form-control {
      background-color: #141414;
      border: 1px solid #333;
      color: #fff;
      border-radius: 8px;
      padding: 12px;
    }

    .form-control:focus {
      background-color: #141414;
      color: #fff;
      border-color: #ffcc33;
      box-shadow: 0 0 0 0.2rem rgba(255, 204, 51, 0.25);
    }

    .btn-custom {
      background-color: #ffcc33;
      color: #141414;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      padding: 12px;
    }

    .btn-custom:hover {
      background-color: #e6b800;
      color: #141414;
    }

    a {
      color: #ffcc33;
      text-decoration: none;
    }

    a:hover {
      color: #e6b800;
      text-decoration: underline;
    }
  </style>
</head>

<body>
  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container position-relative d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center me-auto me-xl-0">
        <h1 class="sitename">Horizon Key</h1><span>.</span>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html" class="active">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="portfolio.html">Portfolio</a></li>
          <li><a href="pricing.html">Pricing</a></li>
          <li><a href="team.html">Team</a></li>
          <li class="dropdown"><a href="#"><span>Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="#">Dropdown 1</a></li>
              <li class="dropdown"><a href="#"><span>Deep Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                <ul>
                  <li><a href="#">Deep Dropdown 1</a></li>
                  <li><a href="#">Deep Dropdown 2</a></li>
                  <li><a href="#">Deep Dropdown 3</a></li>
                  <li><a href="#">Deep Dropdown 4</a></li>
                  <li><a href="#">Deep Dropdown 5</a></li>
                </ul>
              </li>
              <li><a href="#">Dropdown 2</a></li>
              <li><a href="#">Dropdown 3</a></li>
              <li><a href="#">Dropdown 4</a></li>
            </ul>
          </li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <div id="auth-buttons" class="d-flex align-items-center gap-2">
        <!-- JS will inject login/signup or user info + logout -->
      </div>
    </div>
  </header>

  <main>
    <div class="form-wrapper">
      <h2>Create Your Account</h2>
      <form id="signup-form">
        <div class="mb-3">
          <label for="signupName" class="form-label">Full Name</label>
          <input type="text" class="form-control" id="signupName" required />
        </div>
        <div class="mb-3">
          <label for="signupEmail" class="form-label">Email Address</label>
          <input type="email" class="form-control" id="signupEmail" required />
        </div>
        <div class="mb-3">
          <label for="signupPassword" class="form-label">Password</label>
          <input type="password" class="form-control" id="signupPassword" required />
        </div>
        <div class="mb-3">
          <label for="signupConfirmPassword" class="form-label">Confirm Password</label>
          <input type="password" class="form-control" id="signupConfirmPassword" required />
        </div>
        <button type="submit" class="btn btn-custom w-100">Sign Up</button>
        <p class="mt-4 text-center">
          Already have an account? <a href="login.html">Log In</a>
        </p>
        <p id="signup-error" class="text-danger text-center mt-3"></p>
      </form>
    </div>
  </main>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

  <script>
    // Your Firebase config (replace with your own)
    const firebaseConfig = {
      apiKey: "AIzaSyCwrxpMDHbRSuOpdapdXdvabIUj7ysIhOI",
      authDomain: "horizon-key-9f054.firebaseapp.com",
      projectId: "horizon-key-9f054",
      storageBucket: "horizon-key-9f054.firebasestorage.app",
      messagingSenderId: "675446115778",
      appId: "1:675446115778:web:23cdb1134f59af98ad9a5b"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Update Navbar Buttons based on auth state
    function updateAuthButtons(user) {
      const authButtons = document.getElementById("auth-buttons");
      authButtons.innerHTML = "";

      if (user) {
        // User logged in
        const userEmail = document.createElement("span");
        userEmail.textContent = user.email;
        userEmail.style.color = "#ffcc33";
        userEmail.style.marginRight = "10px";

        const logoutBtn = document.createElement("button");
        logoutBtn.textContent = "Logout";
        logoutBtn.className = "btn btn-custom";
        logoutBtn.onclick = () => auth.signOut();

        authButtons.appendChild(userEmail);
        authButtons.appendChild(logoutBtn);
      } else {
        // User logged out: show Get Started & Login links
        const getStartedLink = document.createElement("a");
        getStartedLink.href = "signup.html";
        getStartedLink.className = "btn btn-custom";
        getStartedLink.textContent = "Get Started";

        const loginLink = document.createElement("a");
        loginLink.href = "login.html";
        loginLink.className = "btn btn-custom";
        loginLink.style.marginLeft = "10px";
        loginLink.textContent = "Login";

        authButtons.appendChild(getStartedLink);
        authButtons.appendChild(loginLink);
      }
    }

    // Listen for auth state changes
    auth.onAuthStateChanged(user => {
      updateAuthButtons(user);
      if (user) {
        // Optionally redirect to homepage or dashboard after signup
        // window.location.href = "index.html";
      }
    });

    // Handle Signup form submit
    const signupForm = document.getElementById("signup-form");
    signupForm.addEventListener("submit", e => {
      e.preventDefault();

      const name = document.getElementById("signupName").value.trim();
      const email = document.getElementById("signupEmail").value.trim();
      const password = document.getElementById("signupPassword").value;
      const confirmPassword = document.getElementById("signupConfirmPassword").value;
      const errorMsg = document.getElementById("signup-error");
      errorMsg.textContent = "";

      if (password !== confirmPassword) {
        errorMsg.textContent = "Passwords do not match.";
        return;
      }

      auth
        .createUserWithEmailAndPassword(email, password)
        .then(userCredential => {
          // Optionally update user profile with full name
          return userCredential.user.updateProfile({ displayName: name });
        })
        .then(() => {
          // Redirect to homepage or dashboard after signup
          window.location.href = "index.html";
        })
        .catch(error => {
          errorMsg.textContent = error.message;
        });
    });
  </script>
</body>

</html>
